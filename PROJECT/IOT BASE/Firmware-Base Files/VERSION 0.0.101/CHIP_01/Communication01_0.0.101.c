/*
 *	File			:	Communication01_0.0.101.c
 *	Date created	:	27/10/2016
 *	Author			:	Nguyen Chinh Thuy
 *	Language		: 	C
 *	IDE				:	CCS6.1.2.00015
 *	Target object	:	MSP430G2553
 *	Current version	:	0.0.101
 *	Description		:	Source file for Communication of First Chip
 */
/**************************************************************************************************
 *	PRE-DEFINITIONs
 *************************************************************************************************/


/**************************************************************************************************
 *	INCLUDEs
 *************************************************************************************************/
#include "HEADER01_0.0.101.h"


/**************************************************************************************************
 *	PUBLICs
 *************************************************************************************************/
uint8_t			varI2CData01;


/**************************************************************************************************
 *	PRIVATEs
 *************************************************************************************************/


/**************************************************************************************************
 *	FUNCTIONs
 *************************************************************************************************/
/*
 *	Function:
 *	Purpose	:
 *	Input	:
 *	Output	:
 */
void
cmn01Send (const uint16_t I2C_ADDR_, const chip_TouchPad_Data eTouchPadSendTo_)
{
	/* Test whether Master? */
	if(!(UCB0CTL0 & UCMST))		// If chip is being Slave mode, set it as Master
	{
		i2cSetup(I2C_MASTER, I2C_ADDR_TOUCHPAD, 40, INT_I2C_RX_ON, INT_I2C_TX_OFF, INT_I2C_STT_OFF);
		__delay_cycles(DL_500MS * FREQUENCY);
	}

	/* Declare */
	uint8_t	arrTmp[3];

	/* Set received address*/
	i2cSlvAddress(I2C_ADDR_);

	/* Make frame */
	arrTmp[0] = I2C_HEADER_TOUCHPAD;
	arrTmp[1] = eTouchPadSendTo_;
	arrTmp[2] = I2C_ENDING;

	/* Send */
	i2cMstWriteArray(arrTmp, 3);
}
//-------------------------------------------------------------------------------------------------
/*
 *	Function:
 *	Purpose	:
 *	Input	:
 *	Output	:
 */
//-------------------------------------------------------------------------------------------------
/*
 *	Function:
 *	Purpose	:
 *	Input	:
 *	Output	:
 */
//-------------------------------------------------------------------------------------------------
/*
 *	Function:
 *	Purpose	:
 *	Input	:
 *	Output	:
 */
//-------------------------------------------------------------------------------------------------
/*
 *	Function:
 *	Purpose	:
 *	Input	:
 *	Output	:
 */
//-------------------------------------------------------------------------------------------------


/**************************************************************************************************
 *	END OF Communication01_0.0.101.c
 *************************************************************************************************/
