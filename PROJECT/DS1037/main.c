/*
 *	File			:	main.c
 *	Date created	:	22/07/2016
 *	Author			:	Nguyen Chinh Thuy
 *	Tool			:	CCS6.1.2.00015 (C programming)
 *	Current version	:	1.0.1
 *	Description		:	Explore DS1037
 *	Target object	:	MSP430G2553
 */
/**************************************************************************************************
 *	IMPORT
 *************************************************************************************************/
#include <msp430.h>
#include "VERSION 1_0_1/CLOCK_1_0_1.h"
#include "VERSION 1_0_1/WATCHDOG_1_0_1.h"
#include "VERSION 1_0_1/GPIO_1_0_1.h"
#include "VERSION 1_2_3/USCI_UART_1_2_3.h"
#include "VERSION 1_0_1/USCI_I2C_1_0_1.h"
#include "VERSION 1_0_3/DS1307_1_0_3.h"


/**************************************************************************************************
 *	DEFINITIONs
 *************************************************************************************************/


/**************************************************************************************************
 *	MAIN-ROUTINE
 *************************************************************************************************/
void main (void)
{
	/* SETUP */
	//-Clock-//
	clkSetup(CLKS_SMCLK_1MHZ);

	//-WDT-//
	wdtSetup(WDT_OFF, WDT_TIME_32MS);

	//-GPIO-//
	gpioSetup(PORT1, LED_RED, LED_RED);

	//-UART-//
	uartSetup(sUartSetup.sSmclk1Mhz.sBaud9600.sIntRxdOff);

	//-I2C-//
	i2cSetup(I2C_MASTER, DS1307_ADDRESS);

	//-DS1037-//
	ds1307Setup(23, 59, 50, 7, 28, 2, 15);
	__delay_cycles(DL_2S);
//-------------------------------------------------------------------------------------------------
	/* PROCESS */
	while(1)
	{
		gpioToggle(PORT1, LED_RED);
		__delay_cycles(DL_1S);
		ds1307Read();
		ds1307Print();
	}
}


/**************************************************************************************************
 *	INTERRUPT SERVICE ROUTINEs
 *************************************************************************************************/
/* RXD */
//#pragma vector = USCIAB0RX_VECTOR
//__interrupt void rxdIsr (void)
//{
//	rxdInt();
//}


/**************************************************************************************************
 *	END OF main.c
 *************************************************************************************************/
